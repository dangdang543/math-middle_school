<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>10ⁿ - 1 소인수분해 도구</title>
    <style>
        body { font-family: 'Pretendard', sans-serif; background-color: #f8f9fa; display: flex; justify-content: center; align-items: center; min-height: 100vh; margin: 0; }
        .container { background: white; padding: 2rem; border-radius: 20px; box-shadow: 0 10px 30px rgba(0,0,0,0.1); width: 95%; max-width: 500px; text-align: center; }
        h1 { color: #1a73e8; font-size: 1.5rem; margin-bottom: 1.5rem; }
        .input-group { margin-bottom: 2rem; }
        label { display: block; margin-bottom: 10px; color: #555; font-weight: bold; }
        input { width: 80%; padding: 12px; border: 2px solid #ddd; border-radius: 10px; font-size: 1.2rem; text-align: center; outline: none; transition: 0.3s; }
        input:focus { border-color: #1a73e8; box-shadow: 0 0 8px rgba(26,115,232,0.2); }
        button { width: 85%; padding: 15px; background: #1a73e8; color: white; border: none; border-radius: 10px; cursor: pointer; font-size: 1.1rem; font-weight: bold; margin-top: 10px; }
        button:hover { background: #1557b0; }
        
        #result-area { margin-top: 2rem; padding: 20px; border-radius: 15px; background: #f1f3f4; min-height: 100px; display: flex; flex-direction: column; justify-content: center; }
        .target-num { font-size: 1rem; color: #666; margin-bottom: 10px; }
        .factorization { font-size: 1.8rem; font-weight: bold; color: #d93025; word-break: break-all; }
        sup { font-size: 1rem; color: #d93025; }
    </style>
</head>
<body>

<div class="container">
    <h1>10ⁿ - 1 소인수분해</h1>
    <div class="input-group">
        <label for="n-value">n 값을 입력하세요 (1 ~ 15)</label>
        <input type="number" id="n-value" placeholder="예: 2" min="1" max="15">
        <button onclick="calculate()">인수분해 결과 보기</button>
    </div>

    <div id="result-area">
        <div id="target-text" class="target-num">결과가 여기에 표시됩니다.</div>
        <div id="factor-text" class="factorization"></div>
    </div>
</div>

<script>
    function calculate() {
        const n = parseInt(document.getElementById('n-value').value);
        if (isNaN(n) || n < 1) {
            alert("1 이상의 숫자를 입력해주세요.");
            return;
        }

        // 10^n - 1 계산 (BigInt 사용하여 정밀도 유지)
        let num = BigInt("9".repeat(n));
        const originalNum = num.toLocaleString();
        
        const factors = factorize(num);
        displayResult(n, originalNum, factors);
    }

    function factorize(num) {
        let n = num;
        let counts = {};
        let d = 2n;

        // 소인수분해 알고리즘
        while (d * d <= n) {
            while (n % d === 0n) {
                counts[d] = (counts[d] || 0) + 1;
                n /= d;
            }
            d++;
        }
        if (n > 1n) {
            counts[n] = (counts[n] || 0) + 1;
        }
        return counts;
    }

    function displayResult(n, originalNum, factors) {
        const targetText = document.getElementById('target-text');
        const factorText = document.getElementById('factor-text');
        
        targetText.innerHTML = `10<sup>${n}</sup> - 1 = ${originalNum}`;
        
        let factorHTML = "";
        const keys = Object.keys(factors).sort((a, b) => Number(BigInt(a) - BigInt(b)));
        
        keys.forEach((p, index) => {
            let exponent = factors[p];
            if (exponent > 1) {
                factorHTML += `${p}<sup>${exponent}</sup>`;
            } else {
                factorHTML += `${p}`;
            }
            
            if (index < keys.length - 1) {
                factorHTML += " × ";
            }
        });
        
        factorText.innerHTML = factorHTML;
    }

    // 엔터키 지원
    document.getElementById('n-value').addEventListener('keypress', function (e) {
        if (e.key === 'Enter') calculate();
    });
</script>

</body>
</html>